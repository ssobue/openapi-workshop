<!--
doc_id: requirements-01
title: 要件: リソース指向設計
version: 1.1.0
status: stable
source_template: docs/templates/requirements-template.md
-->

# 要件: リソース指向設計

## 1. 背景と目的
- **課題の説明:**
  - サービス指向など別の設計パラダイムで実装してきた技術者が、RESTful Web API の設計に必要な前提知識（リソースの考え方、パス設計、HTTP メソッドと操作の関係）を整理できていない。
- **ビジネス成果:**
  - 受講後に RESTful Web API の設計に着手できる状態になる。理解度測定の指標はアンケートで設定し、目標値は TBD とする。
- **非ゴール:**
  - プログラミング言語やフレームワークの一般的な利用方法の習得は対象外とする（RESTful の理解に最低限必要な補足のみ行う）。

## 2. 参照資料
- **主要リファレンス:**
  - OpenAPI Workshop ドキュメント（`openapi/openapi.yaml`）
- **関連資料:**
  - TBD（既存のアーキテクチャ図、API 仕様、プロダクトブリーフがあればリンクを追記）
- **補助ドキュメント:**
  1. `docs/analysis/analysis-01-roa.md`
  2. `docs/design/design-01-roa.md`（予定）
  3. `docs/plan/plan-01-roa.md`（予定）
  4. `docs/adr/adr-01-rfc9457.md`
  5. `docs/adr/adr-02-java21-spring-boot.md`
  6. `docs/adr/adr-03-http-rfc9110-9112.md`

## 3. ステークホルダーと役割
1. **意思決定者:**
  - TBD（要件の優先順位、スコープ承認）
2. **承認者:**
  - TBD（要件と成果物の受け入れ）
3. **実装者:**
  - 教材作成者 / 開発担当（Spring Boot サンプル、演習課題の実装）
4. **フィードバック方法:**
   1. レビュー会での口頭フィードバック
   2. 受講後アンケートでの定量評価

## 4. 機能要件

### 4.1 ユーザーストーリー
1. **学習者として**、HTTP メソッドの意味とリソース操作の対応を理解したい。  
   **受け入れ条件:**
   1) GET/POST/PUT/PATCH/DELETE の意味と安全性・冪等性の違いを説明できる。
   2) リソース操作に応じたメソッド選択の指針を説明できる。
2. **学習者として**、リソースの識別とパス設計の考え方を理解したい。  
   **受け入れ条件:**
   1) リソースとコレクションの違いを説明できる。
   2) パス設計の例を挙げて是非を判断できる。
3. **学習者として**、別の設計パラダイムとの違いを整理したい。  
   **受け入れ条件:**
   1) サービス指向の設計と RESTful の違いを 2 点以上説明できる。
   2) 典型的な混同例を挙げ、どのパラダイムに属するかを判別できる。
4. **学習者として**、OpenAPI Specification を使った設計に着手できる状態になりたい。  
   **受け入れ条件:**
   1) リソースと操作を OpenAPI のパスに落とし込める。
   2) 主要なレスポンスコードとエラー表現の考え方を説明できる。

### 4.2 システム挙動
1. 教材は「概念説明」「設計例」「演習」の 3 部構成とする。
2. 演習は、リソース設計とパス設計のアウトプットを提出できる形にする。
3. エッジケースとして、非 RESTful な設計例を提示し、どこが問題かを説明させる。
4. 誤答に対しては、どの設計パラダイムに基づく誤りかを明示する。

### 4.3 データ契約
1. サンプル API の入出力は JSON（UTF-8）を前提とする。
2. リソース表現は `id` を含む一意識別子を持つ。
3. エラー応答は RFC 9457 に準拠し、`application/problem+json` と `type` / `title` / `status` / `detail` / `instance` を含める。
4. 後方互換性は「フィールド追加のみ許容」を基本方針とする。

## 5. 非機能要件
1. **性能目標:** 学習用途のため目標値は TBD とし、ローカル環境での応答が体感的に遅延しないこと。
2. **スケーラビリティ仮定:** 同時利用者は少数（クラス規模）を想定する。
3. **可観測性:** サンプル API のリクエスト/レスポンスをログで確認できること。
4. **セキュリティ/プライバシー:** 実データは扱わず、認証・認可は教材の範囲外とする。
5. **プロトコル準拠:** HTTP セマンティクスは RFC 9110、HTTP/1.1 は RFC 9112 に準拠する。
6. **コンプライアンス:** 外部公開不要のローカル実行を前提とする。

## 6. マイルストーンと成果物
1. **要件確定（TBD）:** 要件レビュー完了、課題/非ゴールの合意。
2. **教材設計（TBD）:** 章立て、演習仕様、レビュー指摘反映。
3. **実装（TBD）:** Spring Boot サンプル、演習テンプレート、OpenAPI 例。
4. **検証（TBD）:** 受講テスト、アンケート実施、理解度評価。

## 7. リスクと意思決定ログ

### 7.1 リスク
1. **設計パラダイムの混同:** どのパラダイムの話かが不明確になり、リソース指向設計に結び付かない。
   - 対策: 各説明に「対象パラダイム」を明記する。
   - ステータス: 未対応
2. **外部事例不足:** オープンな Web API の利用経験が少なく、理解の補助材料が不足する。
   - 対策: 公開 API の事例を紹介する（TBD）。
   - ステータス: 未対応

### 7.2 意思決定ログ
1. **決定事項:** Java 21 / Spring Boot WebMVC を前提とする。  
   **根拠:** 既存の制約に準拠。  
   **代替案:** 別言語/フレームワーク。  
   **証拠リンク:** `docs/analysis/analysis-01-roa.md`
2. **決定事項:** 1 日（約 8 時間）で完結する学習スコープにする。  
   **根拠:** 学習目的としての制約。  
   **代替案:** 複数日構成。  
   **証拠リンク:** `docs/analysis/analysis-01-roa.md`
3. **決定事項:** HTTP セマンティクス/HTTP/1.1 を RFC 9110/9112 に準拠させる。  
   **根拠:** 追加されたプロトコル制約に準拠。  
   **代替案:** RFC を明示しない運用。  
   **証拠リンク:** `docs/analysis/analysis-01-roa.md`

## 8. AI 協働計画
1. **利用場面:**
   1) 章立て案の作成と要約
   2) 演習の設問案・解説案のドラフト
   3) OpenAPI 記述例のドラフト
2. **人によるレビュー:**
   1) リソース指向の定義が曖昧になっていないか
   2) パス設計と HTTP メソッドの対応が一貫しているか
   3) 非 RESTful な例の指摘が明確か
3. **ガードレール:**
   1) 外部資料の引用は出典を明記する
   2) 不確実な内容は TBD を付けて保留する
   3) OpenAPI Workshop ドキュメントと用語整合を取る
4. **プロンプト例:**
   1) 「リソース指向設計の学習者向けに、HTTP メソッドの安全性・冪等性を説明する見出し案を 3 つ作成して」
   2) 「非 RESTful なパス設計例を 3 つ挙げ、なぜ非推奨かを 1 行で説明して」

## 9. サインオフチェックリスト
- [ ] 要件が OpenAPI Workshop ドキュメントの基準と照合済みである。
- [ ] ステークホルダーがスコープ、リスク、成功指標を承認済みである。
- [ ] 検証計画と責任者が確定している。
