# 設計テンプレート

[OpenAPI Workshop ドキュメント](https://github.com/ssobue/openapi-workshop/tree/main/docs) に準拠し、設計を具体化するためのアウトラインです。

## 1. アーキテクチャ概要
- **コンテキスト:** システム境界、外部システム、ユーザーとの関係を図解・文章で示す。
- **原則:** 非機能要件から導かれる設計原則（冗長化、セキュリティ、拡張性など）を明記する。
- **トレードオフ:** 採用したアーキテクチャスタイルの理由と却下した代替案。

## 2. コンポーネント設計
- **モジュール/クラス構成:** 責務と依存関係を明確化する。
- **主要フロー:** シーケンス図やステート図で主要ユースケースの流れを示す。
- **データ設計:** スキーマ、契約、マイグレーション方針、後方互換性の考慮点を記載する。

## 3. API / インターフェース
- **契約:** 入出力、バリデーション、エラーコード、バージョニング方針を定義する。
- **互換性:** 既存クライアントへの影響と移行パスを記述する。

## 4. 可観測性・運用
- **計測ポイント:** ログ、メトリクス、トレースの出力方針。
- **運用フロー:** デプロイ、ロールバック、Feature Flag、障害対応の手順をまとめる。

## 5. セキュリティ・プライバシー
- **脅威モデル:** 想定する攻撃ベクトルと対策。
- **データ保護:** 暗号化、アクセス制御、データ保持・削除方針。
- **コンプライアンス:** 対応すべき基準とテスト方法。

## 6. 依存関係と制約
- **外部依存:** ライブラリ、サービス、インフラのバージョン・SLA。
- **制約:** 技術的負債、運用体制、組織的制約を明示する。

## 7. テスト戦略
- **レベル別テスト:** ユニット、統合、E2E、契約テストの範囲と責任分担。
- **環境:** テストデータ、サンドボックス、モック/スタブの方針。

## 8. 関連ドキュメント
- 要求分析 (`analysis.md`)、要件 (`requirements.md` など)、実装計画 (`plan.md`)、ADR へのリンクを付与し整合性を確認する。
